I bought a domain on *Hostinger*. [`https://alexvergara.pro`](https://alexvergara.pro)

That will allow us to reach our *Home lab* from the public interet for some services.

This is quite interesting, since we now can use it for multiple things, like even use DNS over HTTPS in our Adguard, access some services, etc

# Management script

## DDNS üñ•Ô∏è

*DDNS*, formerly known as *dynamic dns* is a ... // TODO 

> [!NOTE]
> *Hostinger* doesn't provide any `DDNS` feature. For such reason, I have a subdomain at [duckdns](duckdns), formerly [this one](https://alexvergara.duckdns.org). This will query our router to ask him what's the current public IP of our home network, since the providers doesn't assign you an static ip unless you pay for it.

This will come in handy now, due that *Hostinger* doesn't provide us with any *DDNS* feature to create an ***A record*** that points our bought domain to our home network.

## The script üèÜ

At the root of the system user, ***vv***, there's an script named `alexvergara.pro.sh`, that basically interacts with the `duckdns` API to fetch our current public IP, and then just make a **PUT** request to the *Hostinger* API to update the *A records* of the `alexvergara.pro` domain, so that will redirect us to our home network.

The script looks like this:

```bash
#!/bin/bash

# Configuration

# Your DuckDNS token and domain
DUCKDNS_TOKEN="DUCKDNS_TOKEN"
DUCKDNS_DOMAIN="alexvergara"

# Hostinger API token
HOSTINGER_API_TOKEN="HOSTINGER_TOKEN"
HOSTINGER_DOMAIN="alexvergara.pro"

# Fetch your current public IP from DuckDNS
CURRENT_IP=$(curl -s "https://www.duckdns.org/update?domains=${DUCKDNS_DOMAIN}&token=${DUCKDNS_TOKEN}&verbose=true" | grep -oP '\d+\.\d+\.\d+\.\d+')

# Check if the IP was fetched successfully
if [[ -z "$CURRENT_IP" ]]; then
  echo "Error: Unable to fetch the public IP."
  exit 1
fi

echo "Current IP: $CURRENT_IP"

# Prepare JSON data to update the DNS record on Hostinger
JSON_DATA=$(cat <<EOF
{
  "overwrite": true,
  "zone": [
    {
      "name": "@", # include all subdomains
      "records": [
        {
          "content": "$CURRENT_IP"
        }
      ],
      "ttl": 14400,
      "type": "A"
    }
  ]
}
EOF
)

# Update DNS record on Hostinger
curl -X PUT "https://developers.hostinger.com/api/dns/v1/zones/${HOSTINGER_DOMAIN}" \
  --header "Content-Type: application/json" \
  --header "Authorization: Bearer ${HOSTINGER_API_TOKEN}" \
  --data "$JSON_DATA"

echo ". DNS record updated to $CURRENT_IP for ${HOSTINGER_DOMAIN}"
```

## The cronjob üï∞Ô∏è